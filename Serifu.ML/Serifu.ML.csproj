<Project Sdk="Microsoft.NET.Sdk">

  <ItemGroup>
    <PackageReference Include="python" Version="[3.11.7]" Condition="'$(OS)' == 'Windows_NT'">
      <PrivateAssets>all</PrivateAssets>
      <GeneratePathProperty>true</GeneratePathProperty>
    </PackageReference>
    <PackageReference Include="pythonnet" Version="3.0.3" />
    <PackageReference Include="Serilog" Version="4.0.0" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\Serifu.Data\Serifu.Data.csproj" />
  </ItemGroup>

  <!-- Because python will only be run locally, we can place the venv in the solution dir to share it between projects. -->
  <Target Name="InstallPythonRequirements" AfterTargets="Build" Condition="'$(OS)' == 'Windows_NT'">
    <Exec Command="$(PkgPython)\tools\python.exe -m venv $(SolutionDir)\.python" />
    <Exec Command="$(SolutionDir)\.python\Scripts\pip.exe install numpy==1.26.4 torch==2.1.2+cu121 transformers==4.36.2 --extra-index-url https://download.pytorch.org/whl/cu121" />
  </Target>

</Project>
