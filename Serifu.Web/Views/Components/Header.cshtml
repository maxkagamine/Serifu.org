@{
    var routeValues = Context.GetRouteData().Values
        .Where(x => x.Key != "lang" && x.Value is string)
        .ToDictionary(x => x.Key, x => (string)x.Value!);

    string? query = routeValues.GetValueOrDefault("query");
}

<header>
    <h1>
        <a asp-action="Home" aria-label="Serifu.org"><img vite-src="/images/serifu.svg" aria-hidden="true" /></a>
    </h1>
    <nav>
        <a asp-action="About">@Strings.NavLinkAbout</a>
        <a href="https://github.com/maxkagamine/Serifu.org" target="_blank" rel="external noreferrer">@Strings.NavLinkGitHub</a>
        @if (CultureInfo.CurrentCulture.TwoLetterISOLanguageName == "en")
        {
            <a asp-all-route-data="routeValues" asp-route-lang="ja" lang="ja" hreflang="ja" data-search="@query">日本語</a>
        }
        else
        {
            <a asp-all-route-data="routeValues" asp-route-lang="en" lang="en" hreflang="en" data-search="@query">English</a>
        }
        <span class="subtitle">@Strings.NavSubtitle</span>
    </nav>
    <button popovertarget="drawer" class="menu-button icon icon-menu" aria-label="@Strings.MenuButtonLabel"></button>
</header>

<div popover id="drawer">
    <nav>
        <a asp-action="About">@Strings.NavLinkAbout</a>
        <a href="https://github.com/maxkagamine/Serifu.org" target="_blank" rel="external noreferrer">@Strings.NavLinkGitHub</a>
        @if (CultureInfo.CurrentCulture.TwoLetterISOLanguageName == "en")
        {
            <a asp-all-route-data="routeValues" asp-route-lang="ja" lang="ja" hreflang="ja" data-search="@query">日本語</a>
        }
        else
        {
            <a asp-all-route-data="routeValues" asp-route-lang="en" lang="en" hreflang="en" data-search="@query">English</a>
        }
    </nav>
    <div class="subtitle">@Strings.NavSubtitle</div>
</div>
